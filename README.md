# Yigo-Edu-Agent: 基于 AutoGen 的教育场景多智能体仿真平台

本项目旨在探索使用 [Microsoft AutoGen](https://github.com/microsoft/autogen) 框架构建一个面向教育场景的多智能体（Multi-Agent）仿真平台。通过模拟不同的教学和讨论模式，为未来的教育应用提供原型和技术验证。

目前，项目包含以下几种核心的智能体交互模式实现。

---

## 当前实现的核心组件

### 1. 中心化群聊模式 (`test_manager_ver.py`)

该脚本演示了 AutoGen 最核心的 `GroupChatManager`（群聊管理器）模式。

- **架构**: 模拟一个有“主持人”的课堂讨论。所有智能体（老师、学生）都将发言内容发送给 `GroupChatManager`，由 `Manager` 来决定下一个发言者。
- **特点**:
    - **强控制**: `Manager` 确保了每次只有一个智能体发言，避免了混乱。
    - **全局上下文**: 所有对话都发生在同一个频道，所有智能体共享完整的聊天记录。
    - **可配置**: 可以通过 `system_message` 对 `Manager` 的行为进行指导，并通过 `max_round` 控制讨论长度。
- **适用场景**: 结构化的课堂讨论、头脑风暴、需要裁判或主持人的辩论会。

### 2. 点对点对话模式 (`test_p2p_ver.py`)

该脚本演示了两个智能体之间直接进行对话的模式。

- **架构**: 通过 `agent.initiate_chat(other_agent, ...)` 方法，一个智能体直接向另一个智能体发起对话，形成一个独立的“二人世界”。
- **特点**:
    - **直接高效**: 对话只在两个参与者之间进行，没有中间环节。
    - **私密性**: 对话内容不为第三方所知。
- **适用场景**: 一对一辅导、问答、任务委托等点对点交互。

### 3. 动态调度群聊模式 (`test_dynamic_manager.py`)

这是对中心化群聊模式的**高级定制**，展示了 AutoGen 框架的强大扩展性。

- **架构**: 创建了一个自定义的 `ClassroomManager`，它继承自 `autogen.GroupChatManager`，并重写了核心的 `select_speaker` 方法。
- **特点**:
    - **规则化调度**: 实现了自定义的发言人选择逻辑（例如，“点名优先”、“师生轮流”）。
    - **灵活性与确定性的结合**: 在自定义规则不触发时，回退到 AutoGen 默认的、基于大语言模型的智能选择策略，兼具了可预测性和灵活性。
- **适用场景**: 需要根据特定业务逻辑来引导对话流向的复杂协作任务。

---

## 下一步努力的方向

通过当前的探索，我们已经验证了多种通信模式的可行性。接下来的目标是构建更**动态、真实、可控**的多智能体协作系统。

1.  **实现混合通信模式 (Hybrid Communication)**
    - **目标**: 将群聊与点对点对话结合。例如，在群聊中，老师可以调用一个“私下辅导”函数，与某个学生开启一个临时的、私密的对话，辅导结束后再将结果带回群聊。
    - **技术路径**: 深入使用 AutoGen 的**函数调用 (Function Calling)** 功能，将一种对话模式作为另一种对话模式的“工具”。

2.  **构建更复杂的发言人选择策略**
    - **目标**: 让 `ClassroomManager` 的决策更加智能，模拟更真实的课堂动态。
    - **技术路径**:
        - **引入“发言意愿”**: 让每个智能体根据上下文“思考”自己是否想发言，`Manager` 在决策时将此作为重要依据。
        - **实现“对话记忆”**: 避免某个学生连续发言，或确保长时间未发言的学生有机会发言。
        - **上下文感知**: 更精准地识别发言中的意图，例如识别出“总结”、“提问”、“反驳”等，并据此选择下一个最合适的发言角色。

3.  **赋予智能体使用工具的能力 (Tool Use)**
    - **目标**: 让学生或老师智能体能够使用外部工具来辅助完成任务。
    - **技术路径**: 为智能体注册工具函数，例如：
        - `search_web(query)`: 学生可以上网查找资料来回答问题。
        - `run_python_code(code)`: 老师可以运行代码来验证一个物理公式。

4.  **探索智能体的状态与记忆**
    - **目标**: 让智能体拥有“个性”和“记忆”。一个学生在多次讨论后，应该能形成自己的知识体系和观点倾向。
    - **技术路径**: 为每个智能体附加一个状态管理器，用于记录其关键学习成果、情绪状态或性格参数，并在 `system_message` 中动态更新。

通过以上方向的努力，我们可以将这个项目从简单的对话模拟，逐步演进为一个能够真正仿真复杂教育场景、具备实际应用价值的强大平台。

更新项目：
- 新增 `test_dynamic_manager.py`，演示了如何定制群聊管理器的发言人选择逻辑。
- 完善了 `test_p2p_ver.py`，添加了更详细的注释和示例。
- 优化了 `test_manager_ver.py`，增加了 `max_round` 参数，控制讨论轮数。